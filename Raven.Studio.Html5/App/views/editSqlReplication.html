<section id="editSQLReplication">
    <form class="form-horizontal" role="form" data-bind="submit: save">
        <div class="btn-toolbar">

            <nav class="navbar navbar-default" role="navigation">
                <div class="collapse navbar-collapse edit-sql-replication-actions btn-toolbar">

                    <div class="btn-group">
                        <button type="submit" class="btn btn-primary" data-bind="enable: $root.isSaveEnabled()" title="Save the index (Alt+S)" accesskey="S">
                            <i class="fa fa-save"></i>
                        </button>
                        <button class="btn btn-default" title="Refresh from server, discarding any unsaved changes" data-bind="click: refreshSqlReplication">
                            <i class="fa fa-refresh"></i>
                        </button>
                    </div>
                    <div class="btn-group">
                        <a type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" accesskey="A">
                            Tools
                            <span class="caret"></span>
                        </a>
                        <ul class="dropdown-menu">
                            <li>
                                <a title="View current SQL Replication stats" data-bind="click: showStats">Stats</a>
                            </li>
                            <li>
                                <a title="Simulate SQL Replication" data-bind="disable: $root.isSaveEnabled(),click: simulateSqlReplication">
                                    Simulation
                                </a>
                            </li>
                            <li>
                                <a data-bind="attr: {href:getSqlReplicationConnectionStringsUrl()}" title="Manage Connection Strings" accesskey="N">Connection Strings</a>
                            </li>
                        </ul>
                    </div>
                    <div class="btn-group">
                        <button class="btn btn-warning" title="Reset SQL Replication" data-bind="click: resetSqlReplication">
                            <span class="glyphicon glyphicon-retweet"></span>
                        </button>
                        <button class="btn btn-danger" title="Delete SQL Replication" data-bind="click: deleteSqlReplication">
                            <i class="fa fa-trash-o"></i>
                        </button>
                    </div>
                    <div class="btn-group pull-right advanced-toggle">
                        <a class="btn btn-default" data-bind="text:'Advanced mode', attr:{title:('Switch to ' + ($root.isBasicView() === true?'Advanced':'Basic') + ' mode')}, click: function(){$root.isBasicView.toggle();}, css:{active: !$root.isBasicView() === true}"></a>
                    </div>



                </div>
            </nav>
        </div>

        <div data-bind="dynamicHeight: { resizeTrigger: window.ravenStudioWindowHeight(), target: 'footer' }, with: $root.editedReplication">
            <div class="form-group col-sm-6">
                <label class="col-sm-4 control-label" title="Sql Replication Mode(alt+i)">Mode</label>
                <div class="col-sm-8">
                    <div class="btn-group" data-toggle="buttons">
                        <label class="btn btn-primary" data-bind="click: enable, css: { active: !disabled() }">
                            <input type="radio" name="options"> Enabled
                        </label>
                        <label class="btn btn-primary" tabindex="1" data-bind="click: disable, css: { active: disabled }">
                            <input type="radio" name="options"> Disabled
                        </label>
                    </div>
                </div>
            </div>
            <div class="form-group col-sm-6">
                <label class="col-sm-4 control-label" title="SQL Replication name (alt+i)">Name</label>
                <div class="col-sm-8">
                    <input tabindex="3" required type="text" class="form-control" name="name" data-bind="value: name, valueUpdate: 'keyup', attr: { placeholder: 'New SQL Replication'}" />
                </div>
            </div>
            <div class="form-group col-sm-6">
                <label class="col-sm-4 control-label">Source Document Collection</label>
                <div class="col-sm-8">
                    <input tabindex="2" required name="ravenEntityName" type="text" class="form-control" data-bind="value: ravenEntityName, valueUpdate: 'keyup', attr: { 'id': 'sourceDocumentCollection'}" />
                    <ul class="dropdown-menu" role="menu" style="display: none;" data-bind="autoComplete: '#sourceDocumentCollection', foreach: searchResults">
                        <li role="presentation" data-bind="click: $parent.saveNewRavenEntityName.bind($parent, $data)">
                            <a role="menuitem" tabindex="-1" href="#">
                                <span data-bind="text: $data"></span>
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="form-group col-sm-6">
                <label class="col-sm-4 control-label" data-bind="text: connectionStringSourceFieldName"></label>
                <div class="col-sm-8">
                    <textarea tabindex="6" rows="4" required type="text" class="form-control" data-bind="attr:{required:connectionStringType() !== $data.PREDEFINED_CONNECTION_STRING_NAME?'required':null},visible:connectionStringType() !== $data.PREDEFINED_CONNECTION_STRING_NAME ,value: connectionStringValue, valueUpdate: 'keyup'" />
                    <select tabindex="7" required type="text" class="form-control" data-bind="optionsCaption: '', options:$root.availableConnectionStrings, attr:{required:connectionStringType() === $data.PREDEFINED_CONNECTION_STRING_NAME?'required':null},visible:connectionStringType() === $data.PREDEFINED_CONNECTION_STRING_NAME ,value: connectionStringType() === $data.PREDEFINED_CONNECTION_STRING_NAME?connectionStringValue:null, valueUpdate: 'keyup'" />
                </div>
            </div>
            <div class="form-group col-sm-6">
                <label class="col-sm-4 control-label">SQL Replication Tables</label>
                <div class="col-sm-8">
                    <table tabindex="8" class="table table-striped table-hover table-sql-replication-tables">
                        <thead>
                            <tr class="sql-replication-tables-header">
                                <td>Table Name</td>
                                <td>Document Key</td>
                                <td class="narrowest-column"><button type="button" style="display: inline-block;" class="close" data-bind="click: addNewTable" title="Add new table"><i class="fa fa-plus"></i></button></td>
                            </tr>
                        </thead>
                        <tbody data-bind="foreach: sqlReplicationTables">
                            <tr>
                                <td>
                                    <div>
                                        <input required type="text" class="form-control" data-bind="value: tableName, valueUpdate: 'keyup'" />
                                    </div>
                                </td>
                                <td>
                                    <div>
                                        <input required type="text" class="form-control" data-bind="value: documentKeyColumn, valueUpdate: 'keyup'" />
                                    </div>
                                </td>
                                <td><button type="button" style="display: inline-block;" class="close" data-bind="if: $parent.sqlReplicationTables().length > 1,click: $parent.removeTable.bind($parent)" title="Remove this table"><span class="glyphicon glyphicon-remove remove-icon"></span></button></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            <div class="form-group col-sm-6" data-bind="visible:$root.isBasicView() == false">
                <label class="col-sm-4 control-label">SQL Provider</label>
                <div class="col-sm-8">
                    <select tabindex="5" required class="form-control"
                            data-bind=" event:{change:$root.providerChanged.bind($root)}, options: ['System.Data.SqlClient','System.Data.SqlServerCe.4.0','System.Data.OleDb','System.Data.OracleClient','MySql.Data.MySqlClient','System.Data.SqlServerCe.3.5','Npgsql'], optionsCaption: '', value: factoryName"></select>
                </div>
            </div>
            <div class="form-group col-sm-6" data-bind="visible:$root.isBasicView() == false">
                <label class="col-sm-4 control-label">Connection String Source</label>
                <div class="col-sm-8">
                    <select tabindex="7" required class="form-control"
                            data-bind="options: $data.availableConnectionStringTypes, optionsCaption: '', value: connectionStringType"></select>
                </div>
            </div>
            <div class="form-group col-sm-6" data-bind="visible:$root.isBasicView() == false">
                <label class="col-sm-4 control-label">Disable Parameterized Deletes</label>
                <div class="checkbox col-sm-8">
                    <input type="checkbox" data-bind=" checked:parameterizeDeletesDisabled" />
                </div>
            </div>
            <div class="form-group col-sm-6" data-bind="visible:$root.isBasicView() === false &&  isSqlServerKindOfDB() === true ">
                <label class="col-sm-4 control-label">Force Query Recompiling</label>
                <div class="checkbox col-sm-8">
                    <input type="checkbox" data-bind=" checked:forceSqlServerQueryRecompile" />
                </div>
            </div>
            <div class="form-group col-sm-6" data-bind="visible:$root.isBasicView() === false">
                <label class="col-sm-4 control-label">Perform Table Quatation</label>
                <div class="checkbox col-sm-8">
                    <input type="checkbox" data-bind=" checked:performTableQuatation" />
                </div>
            </div>
            

            <br />

            <div class="form-group sql-replication-script-container col-sm-12">
                <label class="col-sm-1 control-label script-label" data-placement="auto right" data-trigger="hover">
                    <span class="help-cursor">
                        Script
                        <i class="fa fa-info-circle text-info"></i>
                    </span>
                </label>

                <div class="col-sm-11">
                    <pre tabindex="9" class="form-control editor" data-bind="aceEditor: { code: script, lang: 'ace/mode/javascript' ,minHeight:450}"></pre>
                </div>
            </div>
        </div>
    </form>
</section>